@page "{id:int}"
@model AuditSentinel.Pages.Servidores.DetailsModel
@using Microsoft.AspNetCore.Authorization
@attribute [Authorize(Roles = "Analista,Administrador")]

@{
    ViewData["Title"] = "Detalles del Servidor";
}

<div class="container-fluid py-4">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <div>
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb mb-1">
                    <li class="breadcrumb-item"><a asp-page="./Index">Servidores</a></li>
                    <li class="breadcrumb-item active">Ficha Técnica</li>
                </ol>
            </nav>
            <h1 class="h3 mb-0 text-gray-800">
                <i class="bi bi-info-square text-primary me-2"></i>Detalles del Activo
            </h1>
        </div>
        <div class="d-flex gap-2">
            <a asp-page="./Edit" asp-route-id="@Model.Servidores.IdServidor" class="btn btn-primary shadow-sm">
                <i class="bi bi-pencil-square me-1"></i> Editar
            </a>
            <a asp-page="./Index" class="btn btn-outline-secondary shadow-sm">
                <i class="bi bi-arrow-left me-1"></i> Volver
            </a>
        </div>
    </div>

    <div class="row">
        <div class="col-lg-8">
            <div class="card shadow-sm border-0 mb-4">
                <div class="card-header bg-white py-3">
                    <h6 class="m-0 font-weight-bold text-primary">Especificaciones del Servidor</h6>
                </div>
                <div class="card-body">
                    <div class="row mb-4">
                        <div class="col-sm-4 text-muted small fw-bold text-uppercase">Nombre del Servidor</div>
                        <div class="col-sm-8 h5 fw-bold text-dark">@Html.DisplayFor(model => model.Servidores.NombreServidor)</div>
                    </div>

                    <hr class="text-light">

                    <div class="row mb-4">
                        <div class="col-sm-4 text-muted small fw-bold text-uppercase">Dirección IP de Red</div>
                        <div class="col-sm-8">
                            <code class="h6 fw-bold text-primary bg-light px-3 py-2 rounded">
                                <i class="bi bi-broadcast me-2"></i>@Html.DisplayFor(model => model.Servidores.IP)
                            </code>
                        </div>
                    </div>

                    <hr class="text-light">

                    <div class="row mb-4">
                        <div class="col-sm-4 text-muted small fw-bold text-uppercase">Sistema Operativo</div>
                        <div class="col-sm-8 text-dark">
                            <i class="bi bi-cpu me-2 text-muted"></i>@Html.DisplayFor(model => model.Servidores.SistemaOperativo)
                        </div>
                    </div>

                    <hr class="text-light">

                    <div class="row mb-2">
                        <div class="col-sm-4 text-muted small fw-bold text-uppercase">Fecha de Registro</div>
                        <div class="col-sm-8 text-muted small">
                            <i class="bi bi-calendar-check me-2"></i>@Html.DisplayFor(model => model.Servidores.Create_is)
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-lg-4">
            <div class="card shadow-sm border-0 mb-4 bg-primary bg-gradient text-white">
                <div class="card-body text-center py-4">
                    <div class="mb-3">
                        <i class="bi bi-shield-check-fill" style="font-size: 3rem;"></i>
                    </div>
                    <h5 class="fw-bold">Activo Protegido</h5>
                    <p class="small mb-0 opacity-75">Este servidor está disponible para realizar auditorías de seguridad y escaneos de vulnerabilidades.</p>
                </div>
            </div>

            <div class="card shadow-sm border-0">
                <div class="card-body small">
                    <div class="fw-bold text-muted mb-2 text-uppercase" style="font-size: 0.7rem;">Acciones de Seguridad</div>
                    <div class="d-grid gap-2">
                        <a asp-page="/Escaneos/Create" class="btn btn-sm btn-outline-primary text-start">
                            <i class="bi bi-play-circle me-2"></i> Lanzar Escaneo Nuevo
                        </a>
                        <button class="btn btn-sm btn-outline-info text-start" onclick="window.print()">
                            <i class="bi bi-printer me-2"></i> Imprimir Ficha
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
    body {
        background-color: #f8f9fc;
    }

    .breadcrumb-item + .breadcrumb-item::before {
        content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='8' height='8'%3E%3Cpath d='M2.5 0L1 1.5 3.5 4 1 6.5 2.5 8l4-4-4-4z' fill='currentColor'/%3E%3C/svg%3E");
    }

    .card {
        border-radius: 0.75rem;
    }

    .bg-gradient-primary {
        background: linear-gradient(180deg, #4e73df 10%, #224abe 100%);
    }
</style>